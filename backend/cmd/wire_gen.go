// Code generated by Wire. DO NOT EDIT.

//go:generate go run github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/billykore/kore/backend/internal/app/order"
	"github.com/billykore/kore/backend/internal/app/otp"
	"github.com/billykore/kore/backend/internal/app/product"
	"github.com/billykore/kore/backend/internal/app/shipping"
	"github.com/billykore/kore/backend/internal/app/user"
	"github.com/billykore/kore/backend/internal/infra/http"
	"github.com/billykore/kore/backend/internal/infra/http/handler"
	"github.com/billykore/kore/backend/internal/infra/mail"
	"github.com/billykore/kore/backend/internal/infra/messaging"
	"github.com/billykore/kore/backend/internal/infra/messaging/rabbitmq"
	"github.com/billykore/kore/backend/internal/infra/persistence"
	"github.com/billykore/kore/backend/internal/infra/storage/postgres"
	"github.com/billykore/kore/backend/pkg/config"
	"github.com/billykore/kore/backend/pkg/logger"
	"github.com/billykore/kore/backend/pkg/validation"
	"github.com/labstack/echo/v4"
)

import (
	_ "github.com/joho/godotenv/autoload"
)

// Injectors from wire.go:

func initKore(cfg *config.Config) *kore {
	loggerLogger := logger.New()
	echoEcho := echo.New()
	db := persistence.NewPostgres(cfg)
	userRepository := postgres.NewUserRepository(db)
	service := user.NewService(loggerLogger, userRepository)
	userHandler := handler.NewUserHandler(service)
	orderRepository := postgres.NewOrderRepository(db)
	orderService := order.NewService(loggerLogger, orderRepository)
	connection := rabbitmq.NewConnection(cfg)
	orderHandler := handler.NewOrderHandler(orderService, connection)
	otpRepository := postgres.NewOtpRepository(db)
	mailer := mail.NewSender(cfg)
	otpService := otp.NewService(loggerLogger, otpRepository, mailer)
	validator := validation.New()
	otpHandler := handler.NewOtpHandler(otpService, validator)
	productRepository := postgres.NewProductRepository(db)
	productService := product.NewService(loggerLogger, productRepository)
	productHandler := handler.NewProductHandler(productService)
	shippingRepository := postgres.NewShippingRepository(db)
	shippingService := shipping.NewService(loggerLogger, connection, shippingRepository)
	shippingProducer := rabbitmq.NewShippingProducer(cfg, connection)
	shippingHandler := handler.NewShippingHandler(shippingService, shippingProducer)
	router := http.NewRouter(cfg, loggerLogger, echoEcho, userHandler, orderHandler, otpHandler, productHandler, shippingHandler)
	server := http.NewServer(router)
	orderConsumer := rabbitmq.NewOrderConsumer(cfg, loggerLogger, connection, orderService)
	consumer := messaging.NewConsumers(cfg, loggerLogger, orderConsumer)
	mainKore := newKore(server, consumer)
	return mainKore
}
